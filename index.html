<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jQuery+css3轮播公告栏</title>
    <meta content="jQuery+css3轮播公告栏" name="description">
    <meta content="jQuery+css3轮播公告栏" name="keywords">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <script src="http://www.iampua.com/pui/dist/js/pix2rem_for_1920.min.js"></script>
    <link href="http://www.iampua.com/pui/dist/css/base_for_1920_2016_11.min.css" rel="stylesheet" />
    <link href="http://www.iampua.com/pui/dist/css/s_chat_2017_02_21.min.css" rel="stylesheet" />
</head>
<body>
    <article class="pageview">
        <section class="main s_chat">
            <div class="up_mod" id="slider">
                <div class="rank" id="rank">
                    <div class="rank_con" id="rank_con">
                        <ul class="clearfix"></ul>
                    </div>
                </div>
            </div>
        </section>
    </article>
    <footer id="footer" style="text-align:center;font-size:12px;padding:250px 0 50px;position: absolute;bottom: 0;width: 100%;">
        <div class="outer">
            <div id="footer-info">
                <div class="footer-left">
                    <a target="_blank" href="http://www.iampua.com/pui/">返回 PUI 首页</a> | <a target="_blank" href="http://www.iampua.com/">泡学达人</a> | <a target="_blank" href="mailto:kbl_1794@qq.com">联系我们</a>
                    <br>
                    <br>
                    Copyright © 2015-<span id="year_today">2017</span> iampua.com | <a href="http://www.miibeian.gov.cn/" target="_blank">粤ICP备13012994号-1</a>
                </div>
            </div>
        </div>
    </footer>  
    <script src="http://www.iampua.com/pui/dist/js/lib/jquery-2.1.3.min.js"></script>
    <script>
        // slideshow
        $(function () {
            var _slide = $('#rank_con ul'),
                tHeight = $('#rank_con').height() / 6,
                height = tHeight * 1 / 1.27 + 'px',
                paddingTop = tHeight * 0.27 / 1.27 + 'px',
                messageArr = [ // ajax过来的队列数据
                    {
                        name: '用户名称用户名称1',
                        avatar: 'http://dummyimage.com/110/FF8604/fff',
                        message: '我到底说了什么哈哈'
                    }, {
                        name: '用户名称用户名称2',
                        avatar: 'http://dummyimage.com/110/FF8604/fff',
                        message: '我到底说了什么哈哈我到底说了什么哈哈我到底说了什么哈哈'
                    }, {
                        name: '用户名称用户名称3',
                        avatar: 'http://dummyimage.com/110/FF8604/fff',
                        message: '我到底说了什么哈哈'
                    }
                ];
            setInterval(function () { // 模拟每2秒获取数据
                // ajax 异步获取数据
                if (messageArr.length > 0) {
                    var crowns = ['first', 'second', 'third'];
                    $.each(messageArr, function (n, obj) {
                        var _html = '<li class="on"><dl class="clearfix"><dt class="avatar ' + crowns[n % 3] + '"><img src="' + obj.avatar + '"></dt><dd><span class="name">' + obj.name + '</span><span class="ct">' + obj.message + '</span></dd></dl></li>';
                        setTimeout(function () {
                            _slide.prepend(_html);
                            setTimeout(function () {
                                $('#rank_con ul').find('.on').addClass('off animated').removeClass('on').css({
                                    height: height,
                                    paddingTop: paddingTop,
                                    opacity: 1
                                });
                            }, 20);
                        }, 700 * n);
                    });
                }
                if ($('#rank_con .off').length > 30) {
                    $('#rank_con .off:gt(30)').remove();
                }
            }, 2000);

        });
    </script>
    <script>
    document.getElementById('year_today').innerHTML = (new Date()).getFullYear(); var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?3f796b398b088d897a22e0e437ee603e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
    </script>    
</body>
</html>
